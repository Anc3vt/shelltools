#!/bin/bash

. $ST_HOME/functions

if [ -z "$1" ]; then
  echo "Usage: ls | $0 \"your-command-here\""
  exit 1
fi

cmd="$1"

while IFS= read -r dir; do
  if [ -d "$dir" ]; then
	 echo -e "\033[0;33m> $dir/> \033[0m\033[1;34m$cmd\033[0m"
    (cd "$dir" && eval "$cmd")
  else
    echo "skip: '$dir' â€” not a directory"
  fi
done
